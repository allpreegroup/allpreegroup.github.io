<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> 
 <link href="//site-assets.fontawesome.com/releases/v6.1.1/css/all.css" rel="stylesheet"> 
  <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://www.allpree.com/img/AllPreepwaapp.png"/>
<link rel="apple-touch-icon" type="image/png" sizes="192x192" href="https://www.allpree.com/img/AllPreepwaapp.png"/>
<link rel="apple-touch-icon" type="image/png" sizes="32x32" href="https://www.allpree.com/img/AllPreepwaapp.png"/>
<link rel="apple-touch-icon" type="image/png" sizes="96x96" href="https://www.allpree.com/img/AllPreepwaapp.png"/>
<link rel="apple-touch-icon" type="image/png" sizes="16x16" href="https://www.allpree.com/img/AllPreepwaapp.png"/>
	<link rel="web-app-origin-association" href="/web-app-origin-association">
   <link rel="manifest" href="https://www.allpree.com/manifest.json">
  
  <title>Why Smart Shoppers Use This App Every Day</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 20px;
      color: #333;
    }
   

   .install-section {
  background: #fffbe6;
  padding: 30px 20px;
  max-width: 700px;
  margin: 40px auto;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.08);
  text-align: center;
}

.install-card {
  display: flex;
  gap: 15px;
  align-items: flex-start;
  background: #f0f8ff;
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 25px;
  text-align: left;
}

.install-card .emoji {
  font-size: 3rem;
  line-height: 1;
  flex-shrink: 0;
}

.install-card .content h1 {
  font-size: 1.6rem;
  margin: 0 0 8px;
  color: #003366;
}

.install-card .content p {
  margin: 0;
  font-size: 1rem;
  color: #444;
}

h2 {
  font-size: 1.5rem;
  margin-top: 30px;
  margin-bottom: 20px;
}

.steps {
  margin: 0;
  padding: 0;
}

.step {
  display: flex;
  align-items: flex-start;
  margin-bottom: 20px;
}

.step-number {
  background: #f90;
  color: white;
  font-size: 1.5rem;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-right: 15px;
}

.step-content h3 {
  margin: 0;
  font-size: 1.2rem;
  color: #003366;
}

.step-content p {
  font-size: 1rem;
  color: #444;
}

.install-instruction {
  margin-top: 30px;
  background: #fff3d1;
  padding: 15px 20px;
  border-radius: 10px;
  border-left: 5px solid #f90;
  font-size: 1rem;
  font-weight: bold;
}

    
  .addons-section {
    background: #fffbe6;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    max-width: 800px;
    margin: 40px auto;
    text-align: center;
  }

  .addons-section h2 {
    font-size: 1.8rem;
    margin-bottom: 10px;
  }

  .addons-section .subtext {
    font-size: 1rem;
    color: #555;
    margin-bottom: 30px;
  }

  .addon-card {
    display: flex;
    gap: 15px;
    background: #fff;
    border: 2px solid gold;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
    align-items: flex-start;
    text-align: left;
  }

  .addon-card .emoji {
    font-size: 2.5rem;
    flex-shrink: 0;
  }

  .addon-content h3 {
    margin: 0 0 5px;
    font-size: 1.2rem;
  }

  .addon-content p {
    margin: 0;
    font-size: 1rem;
    color: #444;
  }

.addon-duration {
  margin-top: 30px;
  background: #fff3d1;
  padding: 15px 20px;
  border-radius: 10px;
  border-left: 5px solid #f90;
  box-shadow: inset 0 0 5px rgba(0,0,0,0.05);
}

.addon-duration h3 {
  margin: 0 0 8px;
  font-size: 1.2rem;
}

.addon-duration p {
  margin: 0;
  font-size: 1rem;
  line-height: 1.5;
}


.feature-section {
  background: #eef6ff;
  border-left: 6px solid #0055a5;
  padding: 20px 25px;
  border-radius: 10px;
  margin-top: 40px;
}

.feature-title {
  font-size: 1.3rem;
  margin-bottom: 15px;
  font-weight: bold;
}

.feature-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.feature-list li {
  margin-bottom: 10px;
  padding-left: 24px;
  position: relative;
  font-size: 1rem;
  line-height: 1.4;
}

.feature-list li::before {
  content: "‚úîÔ∏è";
  position: absolute;
  left: 0;
  top: 1px;
}

.feature-list2 {
  list-style: none;
  padding: 0;
  margin: 0;
  line-height: 1.3; /* Adjusted line height for compactness */
  text-align: left;
  font-size: 0.85rem; /* Smaller font size */
}

.feature-list2 li {
  margin-bottom: 4px; /* Reduced margin for closer spacing */
}  

    

.pricing h2 {
  text-align: center;
  font-size: 1.8rem;
  margin-bottom: 30px;
}

.premium {
  background: #fff3e6;
  border: 2px solid #ffa500;
}

.highlight-block {
  margin-top: 40px;
  background: #f0f8ff;
  padding: 25px;
  border-radius: 12px;
  border-left: 6px solid #0055a5;
  display: flex;
  gap: 20px;
  align-items: flex-start;
}

.highlight-block .emoji-big {
  font-size: 3.5rem;
  flex-shrink: 0;
  line-height: 1;
}

.highlight-block h3 {
  margin: 0 0 10px;
  font-size: 1.4rem;
}

.highlight-block p {
  margin: 0 0 10px;
  font-size: 1rem;
}

.highlight-block ul {
  margin: 0;
  padding-left: 20px;
  list-style: none;
}

.highlight-block ul li {
  margin-bottom: 5px;
  font-size: 0.95rem;
}


.pricing-cards {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  margin-top: 30px;
}

.pricing-card {
  background: #f0f8ff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1 1 220px;         /* Allows the card to grow/shrink */
  max-width: 33.333%;      /* Never take more than 1/3 of the row */
  text-align: center;
  box-sizing: border-box;  /* Ensures padding doesn't break layout */
}


.pricing-card .emoji {
  font-size: 3rem;
  margin-bottom: 10px;
}

.pricing-card h3 {
  margin: 0 0 10px;
  font-size: 1.3rem;
  color: #003366;
}

.pricing-card p {
  margin: 0;
  font-size: 1rem;
  line-height: 1.5;
}

/* Plan-specific styling */
.pricing-card.free {
  background: #f9f9f9;
  border: 2px solid #ccc;
}

.pricing-card.diamond {
  background: #e6f7ff;
  border: 2px solid #0055a5;
}

.pricing-card.premium {
  background: #ffe6e6;
  border: 2px solid #f90;
}

   
    .section {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
      max-width: 700px;
      margin: 20px auto;
    }

    .highlight {
      background: #0055a5;
      color: white;
      padding: 10px 20px;
      font-weight: bold;
      border-radius: 8px;
      font-size: 1.2em;
      margin: 20px auto;
      display: block; /* This centers the element since margin auto works on block-level */
      text-align: center;
    }
    
    .columns {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }

    .premium-option {
      margin-top: 30px;
      padding: 20px;
      background: #fffbe6;
      border-left: 6px solid #ff9900;
      border-radius: 10px;
    }
    .column {
      flex: 1 1 45%;
      display: flex;
      gap: 15px;
      align-items: flex-start;
      background: #f0f8ff;
      padding: 15px;
      max-width: 300px;
      border-radius: 10px;
    }
    
    .premium-style {
      background: #fffbe6; /* soft gold tone */
      border-left: 6px solid #ff9900;
    }
    
    .emoji {
      font-size: 4.5rem;
      flex-shrink: 0;
      line-height: 1;
    }
    
    .content h3 {
      margin: 0 0 5px;
      font-size: 1.2rem;
      font-weight: bold;
    }
    
    .content p {
      margin: 0;
      font-size: 0.95rem;
      line-height: 1.5;
    }


    .columns2 {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .column2 {
      flex: 1 1 45%;
      display: flex;
      gap: 15px;
      align-items: flex-start;
      background: #ffff;
      padding: 15px;
      border-radius: 10px;
    }

    .emoji2 {
      font-size: 6.5rem;
      flex-shrink: 0;
      line-height: 1;
    }
   
    .content2 h1 {
      margin: 0 0 10px;
      font-size: 2.2rem;
      font-weight: bold;
    }

    .content2 p {
      margin: 0;
      font-size: 1.0rem;
      line-height: 1.5;
    }

    .footer {
      text-align: center;
      font-style: italic;
      color: #777;
      font-size: 0.4rem;
      margin-top: 60px;
    }
    
    @media (max-width: 700px) {
      .columns {
        flex-direction: column;
      }
    }

@media (max-width: 600px) {

  .pricing-cards {
    flex-direction: column;
    align-items: stretch;
  }

  .pricing-card {
    max-width: 100%;
  }

  .highlight-block {
    flex-direction: column;
    align-items: flex-start;
    text-align: left;
    gap: 15px;
  }

  .highlight-block .emoji-big {
    font-size: 2.5rem;
    align-self: center;
  }

  .highlight-block h3 {
    font-size: 1.2rem;
  }

  .highlight-block p,
  .highlight-block ul li {
    font-size: 0.9rem;
  }


  .addons-section {
    padding: 20px;
  }

  .addon-card {
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 15px;
  }

  .addon-card .emoji {
    font-size: 2rem;
  }

  .addon-content h3 {
    font-size: 1rem;
  }

  .addon-content p {
    font-size: 0.9rem;
  }

  .addon-duration h3 {
    font-size: 1rem;
  }

  .addon-duration p {
    font-size: 0.9rem;
  }

  .feature-section {
    padding: 15px;
  }

  .feature-title {
    font-size: 1.1rem;
  }

  .feature-list li {
    font-size: 0.9rem;
  }

  .columns,
  .columns2 {
    flex-direction: column;
  }

  .column,
  .column2 {
    max-width: 100%;
    flex: 1 1 100%;
  }

  .emoji {
    font-size: 3rem;
  }

  .emoji2 {
    font-size: 4rem;
  }

  .content h3,
  .content2 h1 {
    font-size: 1.2rem;
  }

  .content p,
  .content2 p {
    font-size: 0.9rem;
  }

  .pricing-card p {
    font-size: 0.9rem;
  }

  .pricing-card h3 {
    font-size: 1.1rem;
  }

  .pricing-card .emoji {
    font-size: 2.5rem;
  }

  .highlight {
    font-size: 1rem;
    padding: 8px 15px;
  }
}

.instructions, .desktop-warning {
  background: #fffbe6;
  border: 2px solid #ffeaa7;
  border-radius: 1.25rem;
  padding: 2rem 1.5rem;
  margin: 1rem auto;
  max-width: 600px;
  box-shadow: 0 4px 8px rgba(255, 165, 0, 0.1);
  font-family: 'Segoe UI', sans-serif;
  color: #333;
  text-align: center;
}

.instructions img, .desktop-warning img {
  max-width: 100%;
  height: auto;
  border-radius: 0.75rem;
  margin-bottom: 1rem;
}

.instructions h2, .instructions h3, .instructions h4, .instructions h5,
.desktop-warning h2, .desktop-warning h3 {
  margin: 0.75rem 0;
  color: #d35400; /* deep orange for warmth */
}

.instructions ul {
  
  padding: 1rem 1rem 1rem 2rem;
  border-radius: 0.75rem;
  margin: 1rem 0;
  text-align: left;
  list-style: none;
  position: relative;
}

.feature-list li {
  margin-bottom: 0.75rem;
  line-height: 1.4;
  position: relative;
  padding-left: 1.5rem;
}

.feature-list li::before {
  content: "‚úîÔ∏è";
  position: absolute;
  left: 0;
  top: 0.15rem;
}


.instructions button,
.desktop-warning button {
  background-color: #f90;
  color: #fff;
  border: none;
  border-radius: 9999px;
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  font-weight: bold;
  cursor: pointer;
  transition: background-color 0.3s ease;
  margin-top: 1rem;
}

.instructions button:hover,
.desktop-warning button:hover {
  background-color: #e07b00;
}

#install-status {
  font-weight: bold;
  font-size: 0.95rem;
  margin-top: 1rem;
}

@media (max-width: 480px) {
  .instructions, .desktop-warning {
    padding: 1.25rem 1rem;
  }

  .instructions button {
    width: 100%;
  }
}
#a2hs-popup {
      display: none;
      position: fixed;
      bottom: 80px;
      left: 0;
      right: 0;
      background: #fff;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
      padding: 16px;
      z-index: 99999;
      font-family: sans-serif;
    }
    #a2hs-popup .content {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    #a2hs-install-btn {
      background: #0071ce;
      color: #fff;
      border: none;
      padding: 10px 16px;
      border-radius: 4px;
      cursor: pointer;
    }
    #a2hs-close {
      margin-left: 10px;
      font-size: 20px;
      background: none;
      border: none;
      cursor: pointer;
    }
    
  </style>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J2Z2P5DQPN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-J2Z2P5DQPN');
</script>

  <script>
    if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("https://www.allpree.com/service-worker.js")
            .then(() => console.log("Service Worker Registered"))
            .catch((error) => console.log("Service Worker Registration Failed", error));
    }
</script>
  
</head>
<body>
  <div class="section">
 <div class="column2">
        <div class="emoji2">üì≤</div>
        <div class="content2">
        <h1>Install The App, It's Free </h1>
<p>Get full access to all local deals, exclusive offers, and shopping tools, no account needed. After 7 days, register to keep the savings going.</p>

        </div>
      </div>


    
   <div class="highlight">üõçÔ∏è Why Smart Shoppers Use This App Every Day</div>


<div class="columns">

  <div class="column">
    <div class="emoji">üìç</div>
    <div class="content">
      <h3>Nearby Deals</h3>
      <p>Instantly see local deals based on your location, no setup required.</p>
    </div>
  </div>

  <div class="column">
    <div class="emoji">üî•</div>
    <div class="content">
      <h3>Real-Time Offers</h3>
      <p>New deals appear as businesses update them, always fresh and timely.</p>
    </div>
  </div>

  <div class="column">
    <div class="emoji">üïí</div>
    <div class="content">
      <h3>Countdown Timers</h3>
      <p>Know when deals are expiring with live countdowns.</p>
    </div>
  </div>

  <div class="column">
    <div class="emoji">üõçÔ∏è</div>
    <div class="content">
      <h3>Add to Cart</h3>
      <p>Save deals you like in a built-in cart to keep track of what interests you.</p>
    </div>
  </div>

  <div class="column">
    <div class="emoji">‚ù§Ô∏è</div>
    <div class="content">
      <h3>Like Deals</h3>
      <p>Heart your favorites to revisit them later.</p>
    </div>
  </div>

  <div class="column">
    <div class="emoji">üéÅ</div>
    <div class="content">
      <h3>Cashback </h3>
      <p>Use our eGift Card to shop and unlock cashback rewards up to 49%.</p>
    </div>
  </div>

  <div class="column">
    <div class="emoji">üß≠</div>
    <div class="content">
      <h3>Instant Directions</h3>
      <p>Tap any üìç to get turn-by-turn directions right to the store.</p>
    </div>
  </div>

  <div class="column">
    <div class="emoji">üîÑ</div>
    <div class="content">
      <h3>Dynamic Browsing</h3>
      <p>Deals reshuffle each time you explore, keeping things exciting and new.</p>
    </div>
  </div>

  <div class="column">
    <div class="emoji">üìù</div>
    <div class="content">
      <h3>Shopping List</h3>
      <p>You can save your shopping cart list to view it for later.</p>
    </div>
  </div>

 <div class="column">
    <div class="emoji">üì≤</div>
    <div class="content">
      <h3>App-Like Feel</h3>
      <p>Add to your home screen, super fast, no downloads.</p>
    </div>
  </div>

</div>
<!-- Instructions for Android -->
<div id="android-instructions" class="instructions" style="display: none;">
 
  <center><h3>Ready To Install the App</h3></center>  
  <center><h5>IF YES <br>Click The Button Below</h5></center>
  <center><button onclick="closeSplashPage()">CONTINUE</button></center>
</div>

<!-- Instructions for iOS -->
<div id="ios-instructions" class="instructions" style="display: none;">
 
  <center><h3>Ready To Install the App</h3></center>     
  <center><h5>IF YES <br>Click The Button Below</h5></center>
  <center><button onclick="closeSplashPage()">CONTINUE</button></center>
</div>

<!-- Desktop User Warning -->
<div id="desktop-warning" class="desktop-warning" style="display: none;">
  <p>It looks like you're visiting from a desktop! To get started, please visit this site (allpree.com/install) on your mobile phone.</p>
  <center><button onclick="finishSetup()">Got it!</button></center>
</div>

<!-- additional Instructions -->
<div id="additional-instructions" class="instructions" style="display: none;">
 
  <center><h2><strong>WAIT!</strong><br> Did You Know?</h2>
  <h3>We Do Gift Card Give Away On Our <i class="fa-brands fa-whatsapp"></i> Status</h3></center>
  How to enter:
  <ul style="instructions feature-list"> 
    <li>Install Our Web App</li> <br> 
    <li>Activate Notification </li><br>
    <li>Create An Account</li>	  
  </ul>	
  <center><h4> How To Install Our Web App <br>Click The Button Below </h4></center>
	<center><button id="trigger-a2hs">Install App</button></center>
  <center><button onclick="showFinalInstructions()" style="margin-top: 1rem;">HOW TO</button></center>
</div>

<!-- Final Instructions -->
<div id="final-instructions" class="instructions" style="display: none;">
 
  <center><h2>HOW TO</h2>
    <ul id="android-os" style="instructions feature-list">
      <li>Tap the (menu <i class="fa-solid fa-ellipsis-vertical"></i> <i class="fa-solid fa-bars"></i> <i class="fa-solid fa-ellipsis"></i> ) in the right corner of your browser.</li><br>
      <li>Scroll down and select "<i class="fa-solid fa-arrow-right-to-bracket"></i> Add to Home Screen."</li><br>
      <li>Tap "Add" and you're done!</li>
      <hr>
      <li>Tap on the button below</li><br>
    </ul>
    
    <ul id="ios-os" style="instructions feature-list">
      <li>Tap the Share icon (the square with an arrow) at the bottom of your screen.</li><br>
      <li>Scroll down and select "<i class="fa-solid fa-arrow-right-to-bracket"></i> Add to Home Screen."</li><br>
      <li>Tap "Add" in the top-right corner.</li>
      <hr>
      <li>Tap on the button below</li><br>
    </ul>
    <p style="margin-top: 1.5rem;">  Note: only after installing our web app before you can click the button below </p>
    <center><button onclick="finishSetup()"> CONTINUE </button></center><br>
    <p id="install-status" style="margin-top: 1em;"></p>
</div><br>
  </div>

	<div id="a2hs-popup" style="display: none;
      position: fixed;
      bottom: 80px;
      left: 20px;
      right: 20px;
      background: #fff;
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
      padding: 16px;
      z-index: 99999;
      font-family: sans-serif;
">
  <div class="section" style="display: flex; align-items: center; margin-bottom: 16px;">
    <div class="emoji2" style="font-size: 2rem; margin-right: 12px;">
  <img src="https://www.allpree.com/img/AllPreepwaapp.png" alt="AllPree App Icon" style="height: 88px; width: 88px; border-radius: 10px;" />
</div>
    <div class="content2">
      
	 <img src="https://www.allpree.com/img/AllPreeLocalDeals.png" alt="AllPree App Icon" style="height: 45px; width: 188px; border-radius: 0px;" />    
	    
    </div>
  </div>
   Get full access to all local deals, exclusive offers, and shopping tools, no account needed. To log in, you'll need to create an account. <br><br>
  <div id="a2hs-message" style="margin-bottom: 16px;">
    <!-- This will be filled dynamically for Android or iOS -->
  </div>
  <div style="display: flex; justify-content: flex-end;">
    <button id="a2hs-install-btn" style="margin-right: 10px;">Install</button>
    <button id="a2hs-close">√ó</button>
  </div>
</div>

	
      <div class="footer">
<center><p>Your Privacy is Guaranteed. We will never give, lease, or sell your personal information. Period!
&copy; Copyright 2024 - <script>document.write(new Date().getFullYear());</script>&nbsp;Allpree Local Deals operates under the management of Allpree Group Holding Ltd. All Rights Reserved.
To access exclusive deals and earn rewards, install the Allpree app today!
By using our services, you agree to our <a href="/terms">Terms & Conditions</a> and <a href="/privacy">Privacy Policy</a>.</p></center>
</div>
<script>
  let deferredPrompt;

  const IOS_STORAGE_KEY = 'iosPwaLastSeen';
  const IOS_DAYS_LIMIT = 30;

  function isIos() {
    return /iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase());
  }

  function isInStandaloneMode() {
    return ('standalone' in window.navigator) && window.navigator.standalone;
  }

  function daysSince(dateString) {
    const previous = new Date(dateString);
    const now = new Date();
    const diffTime = now - previous;
    return diffTime / (1000 * 60 * 60 * 24);
  }

  function showPopup() {
    if (!localStorage.getItem('a2hsShown')) {
      document.getElementById('a2hs-popup').style.display = 'block';
    }
  }

  // Android: Capture A2HS event
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;

   
      document.getElementById('a2hs-message').innerHTML = `
       <strong>Install This App, It's Free <br>-- No App Store <br>-- No Play Store <br>-- No Downloads</strong><br><br>
        Add to your home screen for fast, instant access!
      `;
      document.getElementById('a2hs-install-btn').style.display = 'inline-block';
      
   
  });

  // iOS: Show custom message if not in standalone and not seen in 30 days
  window.addEventListener('load', () => {
    if (isIos()) {
      if (isInStandaloneMode()) {
        // User opened the app in standalone ‚Äî update timestamp
        localStorage.setItem(IOS_STORAGE_KEY, new Date().toISOString());
      } else {
        const lastSeen = localStorage.getItem(IOS_STORAGE_KEY);
        const shouldShowPrompt = !lastSeen || daysSince(lastSeen) >= IOS_DAYS_LIMIT;

        if (shouldShowPrompt) {
          
            document.getElementById('a2hs-message').innerHTML = `
              <strong>Install This App, It's Free <br>-- No App Store <br>-- No Play Store <br>-- No Downloads</strong><br><br>
              Add to your home screen for fast, instant access!
              <br><br>
              Tap the <span style="font-weight: bold;">Share</span> icon
              <span style="font-size: 1.2rem;">üì§</span> and then select <strong>"Add to Home Screen"</strong>.
            `;
            document.getElementById('a2hs-install-btn').style.display = 'none';
           
          
        }
      }
    }
  });

  // Android install button
  document.getElementById('a2hs-install-btn').addEventListener('click', async () => {
    if (deferredPrompt) {
      deferredPrompt.prompt();
      const result = await deferredPrompt.userChoice;
      console.log('User response:', result.outcome);
      document.getElementById('a2hs-popup').style.display = 'none';
      localStorage.setItem('a2hsShown', 'true');
      deferredPrompt = null;
    }
  });

  // Close button
  document.getElementById('a2hs-close').addEventListener('click', () => {
    document.getElementById('a2hs-popup').style.display = 'none';
    localStorage.setItem('a2hsShown', 'false'); // So it can show again next time
  });

  // Android: If installed
  window.addEventListener('appinstalled', () => {
    console.log('App was installed');
    document.getElementById('a2hs-popup').style.display = 'none';
    localStorage.setItem('a2hsShown', 'true');
  });
</script>    
<script>
  // Reusable install mode checker
  function isInStandaloneMode() {
    const displayMode = window.matchMedia('(display-mode: standalone)').matches;
    const navigatorStandalone = window.navigator.standalone === true;

    return displayMode || navigatorStandalone;
  }

  function closeSplashPage() {
    // Hide current instructions
    document.getElementById('android-instructions').style.display = 'none';
    document.getElementById('ios-instructions').style.display = 'none';
    document.getElementById('desktop-warning').style.display = 'none';

    // Always show additional instructions, allow repeat views
    document.getElementById("additional-instructions").style.display = "block";
  }

  function showFinalInstructions() {
    // Hide the additional instructions and show the final instructions
    document.getElementById('additional-instructions').style.display = 'none';
    document.getElementById('final-instructions').style.display = 'block';
  }

  function finishSetup() {
    const isAndroid = /android/i.test(navigator.userAgent);
    const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);

    if (isInStandaloneMode()) {
      // Already in PWA mode, show message only
      alert("You're already in the app (PWA mode).");
    } else {
      if (isAndroid) {
        alert("This app is already installed. Tap 'Ok' to continue.");
        // Open in a new tab
        window.open("/splashpage", "_blank");
      } else if (isIOS) {
        alert("Please open this from the app icon on your home screen to continue.");
      } else {
        alert("This feature is only available in the installed app (PWA). Please visit using your mobile device.");
      }
    }
  }

  // Detect device and show relevant instructions
  function detectDevice() {
    const ua = navigator.userAgent;

    const isAndroid = /android/i.test(ua);
    const isIOS = /iPhone|iPad|iPod/i.test(ua);

    if (isAndroid) {
      document.getElementById('android-instructions').style.display = 'block';
      const androidOS = document.getElementById('android-os');
      if (androidOS) androidOS.style.display = 'block';
    } else if (isIOS) {
      document.getElementById('ios-instructions').style.display = 'block';
      const iosOS = document.getElementById('ios-os');
      if (iosOS) iosOS.style.display = 'block';
    } else {
      document.getElementById('desktop-warning').style.display = 'block';
    }

    // Hide unused OS-specific <ol> if they exist
    const androidOS = document.getElementById('android-os');
    const iosOS = document.getElementById('ios-os');
    if (androidOS && !isAndroid) androidOS.style.display = 'none';
    if (iosOS && !isIOS) iosOS.style.display = 'none';
  }

  window.onload = detectDevice;

  // New function to check and show install status
  function checkIfInstalled() {
    const isInstalled = isInStandaloneMode();
    const statusElement = document.getElementById('install-status');

    if (statusElement) {
      if (isInstalled) {
        statusElement.textContent = "‚úÖ App is installed and running in PWA mode.";
        statusElement.style.color = "green";
      } else {
        statusElement.textContent = "‚ùå App is not installed. Please add it to your home screen.";
        statusElement.style.color = "red";
      }
    }
  }
</script>

	 <script>
    (function () {
      const urlParams = new URLSearchParams(window.location.search);
      const brand = urlParams.get('brand');

      if (brand) {
        localStorage.setItem('selectedTakeoverBrand', decodeURIComponent(brand));
        localStorage.removeItem('disableTakeover');

        // Cloak the URL by removing query params
        if (window.history.replaceState) {
          const newUrl = window.location.origin + window.location.pathname;
          window.history.replaceState({}, document.title, newUrl);
        }

        console.log('Takeover brand set to:', decodeURIComponent(brand));
      } else {
        console.warn('No brand specified in URL. Nothing was set.');
      }
    })();
  </script>
  
</body>
</html>
