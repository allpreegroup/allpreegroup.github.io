<style>
    body {
      font-family: sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    .countdown {
      text-align: center;
      font-size: 18px;
      margin-bottom: 20px;
    }
    .brand-section {
      margin-bottom: 30px;
    }
    .brand {
  display: flex;
  align-items: center;
  gap: 12px;
  background-color: #fff;
  padding: 1px 1px;
  border-radius: 10px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
  margin-bottom: 1px;
  min-height: 7px;
}

.brand-logo-container {
  height: 60px;
  width: 60px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.brand-logo-container img {
  max-height: 100%;
  max-width: 100%;
  object-fit: contain;
  border-radius: 8px;
}
    .brand img {
      width: 100px;
      height: 100px;
      border-radius: 1px;
      object-fit: contain;
    }
    .brand-name {
      font-size: 18px;
      font-weight: bold;
    }
    .brand-timer {
  font-size: 14px;
  margin-left: 8px;
    }

    .deal {
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      flex: 0 0 auto;
      width: 100%;
      scroll-snap-align: start;
      position: relative;
      cursor: pointer;
    }
    .deal-grid {
      display: grid;
      grid-auto-flow: column;
       grid-template-rows: repeat(2, 1fr); /* 2 rows */
      grid-auto-columns: 50%;
      gap: 15px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      padding: 10px;
      scrollbar-width: none; /* Firefox */
    }
    .deal-grid::-webkit-scrollbar {
      display: none; /* Chrome, Safari */
    }
    .deal img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-top-left-radius: 10px;
      border-top-right-radius: 10px;
    }
    .deal-content {
      padding: 10px;
    }
    .deal-title {
      font-size: 14px;
      font-weight: bold;
      margin-bottom: 5px;
    }
    .price {
      color: #999;
      text-decoration: line-through;
      font-size: 14px;
    }
    .discount {
      color: #e60000;
      font-weight: bold;
      font-size: 16px;
    }
    .discount-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: red;
      color: white;
      font-weight: bold;
      font-size: 12px;
      padding: 4px 6px;
      border-radius: 4px;
    }

    /* Popup Styles */
    .popup-overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .popup-content {
      background: white;
      border-radius: 10px;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }
    .popup-content img {
  width: 93.7%;
  max-height: 250px;
  object-fit: contain;
  padding: 10px;
  background: #f9f9f9;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  position: relative;
}
    .popup-body {
      padding: 20px;
    }
    .popup-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .popup-price {
      font-size: 14px;
      text-decoration: line-through;
      color: #888;
    }
    .popup-discount {
      font-size: 18px;
      color: #e60000;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .popup-discount-badge {
  position: absolute;
  top: 15px;
  right: 15px;
  background: red;
  color: white;
  font-weight: bold;
  font-size: 12px;
  padding: 5px 8px;
  border-radius: 4px;
  z-index: 10;
}
    .popup-description {
      font-size: 14px;
    }
    .popup-close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 28px;
      color: #333;
      cursor: pointer;
      font-weight: bold;
    }
  </style>
</head>
<body><br>
  <center> <h2>Today’s Deals</h2> </center>

  <div id="deals-container">Loading deals...</div>

  <!-- Popup Overlay -->
  <div class="popup-overlay" id="popup">
    <div class="popup-content" id="popupContent">
      <span class="popup-close" onclick="closePopup()">×</span>
     <div style="position: relative;">
  <span class="popup-discount-badge" id="popupBadge"></span>
  <img id="popupImg" src="" alt="Product">
</div>
      <div class="popup-body">
        <div class="popup-title" id="popupTitle"></div>
        <div class="popup-price" id="popupPrice"></div>
        <div class="popup-discount" id="popupDiscount"></div>
        <div class="popup-description" id="popupDesc"></div>
      </div>
    </div>
  </div>


<script>
    const sheetUrls = [
        'https://opensheet.elk.sh/14Wm7x8CJH23F3W7m1Eh4KRxMSZPHn6DjxpkiuEgpmAs/deals', // First sheet
        
    ];

    function openPopup({ image, name, original, discount, description }) {
        const originalPrice = parseFloat(original.replace(/,/g, '')) || 0;
        const discountPrice = parseFloat(discount.replace(/,/g, '')) || 0;
        const percentOff = originalPrice && discountPrice ? Math.round((1 - discountPrice / originalPrice) * 100) : 0;

        document.getElementById('popupImg').src = image;
        document.getElementById('popupTitle').textContent = name;
        document.getElementById('popupPrice').textContent = `Original Price: JMD ${original}`;
        document.getElementById('popupDiscount').textContent = `Now: JMD ${discount}`;
        document.getElementById('popupDesc').textContent = description || '';
        document.getElementById('popupBadge').textContent = `${percentOff}% OFF`;
        document.getElementById('popup').style.display = 'flex';
    }

    function closePopup() {
        document.getElementById('popup').style.display = 'none';
    }

    async function loadDeals() {
        const container = document.getElementById('deals-container');
        container.innerHTML = '';

        try {
            for (let url of sheetUrls) {
                const res = await fetch(url);
                const rows = await res.json();

                let currentBrand = '';
                let currentLogo = '';
                let brandSection = null;
                let grid = null;

                rows.forEach(row => {
                    if (row.BrandName && row.BrandLogo) {
                        currentBrand = row.BrandName;
                        currentLogo = row.BrandLogo;

                        brandSection = document.createElement('div');
                        brandSection.className = 'brand-section';

                        const brandDiv = document.createElement('div');
                        brandDiv.className = 'brand';
                        const expireDate = row.ExprieDate;

                        const timerId = `timer-${Math.random().toString(36).substring(2)}`;

                        brandDiv.innerHTML = `
                            <div class="brand-logo-container">
                                <img src="${currentLogo}" alt="${currentBrand}" />
                            </div>
                            <div>
                                <span class="brand-name">${currentBrand}</span><br>
                                <span class="brand-timer" id="${timerId}"></span>
                            </div>
                        `;

                        if (row.ExpireDate) {
                            const expireTime = new Date(row.ExpireDate);
                            const timerElement = document.getElementById(timerId);

                            function updateBrandTimer() {
                                const now = new Date();
                                const diff = expireTime - now;

                                if (diff <= 0) {
                                    timerElement.textContent = 'Expired';
                                    clearInterval(interval);
                                    return;
                                }

                                const hours = String(Math.floor(diff / (1000 * 60 * 60))).padStart(2, '0');
                                const minutes = String(Math.floor((diff / (1000 * 60)) % 60)).padStart(2, '0');
                                const seconds = String(Math.floor((diff / 1000) % 60)).padStart(2, '0');

                                timerElement.textContent = `Expires in: ${hours}:${minutes}:${seconds}`;
                            }

                            updateBrandTimer();
                            const interval = setInterval(updateBrandTimer, 1000);
                        }

                        grid = document.createElement('div');
                        grid.className = 'deal-grid';

                        brandSection.appendChild(brandDiv);
                        brandSection.appendChild(grid);
                        container.appendChild(brandSection);
                    }

                    if (row.ProductName && row.ImageURL) {
                        const original = parseFloat(row.OriginalPrice.replace(/,/g, '')) || 0;
                        const discount = parseFloat(row.DiscountPrice.replace(/,/g, '')) || 0;
                        const percentOff = original && discount ? Math.round((1 - discount / original) * 100) : 0;

                        const shortName = row.ProductName.length > 15 ? row.ProductName.slice(0, 15) + '...' : row.ProductName;

                        const dealCard = document.createElement('div');
                        dealCard.className = 'deal';
                        dealCard.innerHTML = `
                            <span class="discount-badge">${percentOff}% OFF</span>
                            <img src="${row.ImageURL}" alt="${row.ProductName}">
                            <div class="deal-content">
                                <div class="deal-title">${shortName}</div>
                                <div class="price">JMD $${row.OriginalPrice}</div>
                                <div class="discount">JMD $${row.DiscountPrice}</div>
                            </div>
                        `;
                        dealCard.addEventListener('click', () => {
                            openPopup({
                                image: row.ImageURL,
                                name: row.ProductName,
                                original: row.OriginalPrice,
                                discount: row.DiscountPrice,
                                description: row.Description
                            });
                        });

                        grid?.appendChild(dealCard);
                    }
                });
            }
        } catch (err) {
            console.error('Failed to load deals:', err);
            container.innerHTML = 'Failed to load deals. Please check the sheet URL.';
        }
    }

    loadDeals();

    document.getElementById('popup').addEventListener('click', function (e) {
        if (e.target === this) {
            closePopup();
        }
    });

    function startBrandCountdown(expireDate, elementId) {
        function update() {
            const el = document.getElementById(elementId);
            if (!el) return;

            const now = new Date();
            const end = new Date(expireDate);
            const diff = end - now;

            if (diff <= 0) {
                el.textContent = ' - Deal Ended';
                el.style.color = 'gray';
                clearInterval(timer);
                return;
            }

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / (1000 * 60)) % 60);
            const seconds = Math.floor((diff / 1000) % 60);

            const parts = [];
            if (days > 0) parts.push(`${days}d`);
            if (hours > 0 || days > 0) parts.push(`${hours}h`);
            parts.push(`${minutes}m`);
            parts.push(`${seconds}s`);

            el.textContent = `Deals - Ends in: ${parts.join(' ')}`;
            el.style.color = (diff < 60 * 60 * 1000) ? 'red' : '#555';
        }

        update();
        const timer = setInterval(update, 1000);
    }
</script>



    
<!-- <script>
    
     const sheetUrl = 'https://opensheet.elk.sh/14Wm7x8CJH23F3W7m1Eh4KRxMSZPHn6DjxpkiuEgpmAs/deals';
 
     function openPopup({ image, name, original, discount, description }) {
   const originalPrice = parseFloat(original.replace(/,/g, '')) || 0;
   const discountPrice = parseFloat(discount.replace(/,/g, '')) || 0;
   const percentOff = originalPrice && discountPrice ? Math.round((1 - discountPrice / originalPrice) * 100) : 0;
 
   document.getElementById('popupImg').src = image;
   document.getElementById('popupTitle').textContent = name;
   document.getElementById('popupPrice').textContent = `Original Price: JMD ${original}`;
   document.getElementById('popupDiscount').textContent = `Now: JMD ${discount}`;
   document.getElementById('popupDesc').textContent = description || '';
   document.getElementById('popupBadge').textContent = `${percentOff}% OFF`;
   document.getElementById('popup').style.display = 'flex';
 }
 
 
     function closePopup() {
       document.getElementById('popup').style.display = 'none';
     }
 
     async function loadDeals() {
       const container = document.getElementById('deals-container');
       container.innerHTML = '';
 
       try {
         const res = await fetch(sheetUrl);
         const rows = await res.json();
 
         let currentBrand = '';
         let currentLogo = '';
         let brandSection = null;
         let grid = null;
 
         rows.forEach(row => {
           if (row.BrandName && row.BrandLogo) {
             currentBrand = row.BrandName;
             currentLogo = row.BrandLogo;
 
             brandSection = document.createElement('div');
             brandSection.className = 'brand-section';
 
             const brandDiv = document.createElement('div');
             brandDiv.className = 'brand';
             const expireDate = row.ExprieDate;
 
             const timerId = `timer-${Math.random().toString(36).substring(2)}`;
 
             brandDiv.innerHTML = `
             <div class="brand-logo-container">
             <img src="${currentLogo}" alt="${currentBrand}" />
             </div>
             <div>
             <span class="brand-name">${currentBrand}</span><br>
             <span class="brand-timer" id="${timerId}"></span>
             </div>
          `;
 
             if (row.ExpireDate) {
             const expireTime = new Date(row.ExpireDate);
             const timerElement = document.getElementById(timerId);
 
             function updateBrandTimer() {
             const now = new Date();
             const diff = expireTime - now;
 
             if (diff <= 0) {
             timerElement.textContent = 'Expired';
             clearInterval(interval);
             return;
           }
 
             const hours = String(Math.floor(diff / (1000 * 60 * 60))).padStart(2, '0');
             const minutes = String(Math.floor((diff / (1000 * 60)) % 60)).padStart(2, '0');
             const seconds = String(Math.floor((diff / 1000) % 60)).padStart(2, '0');
 
             timerElement.textContent = `Expires in: ${hours}:${minutes}:${seconds}`;
           }
 
             updateBrandTimer();
             const interval = setInterval(updateBrandTimer, 1000);
           }
 
 
         if (expireDate) {
            startBrandCountdown(expireDate, timerId);
           }
 
 
             grid = document.createElement('div');
             grid.className = 'deal-grid';
 
             brandSection.appendChild(brandDiv);
             brandSection.appendChild(grid);
             container.appendChild(brandSection);
           }
 
           if (row.ProductName && row.ImageURL) {
             const original = parseFloat(row.OriginalPrice.replace(/,/g, '')) || 0;
             const discount = parseFloat(row.DiscountPrice.replace(/,/g, '')) || 0;
             const percentOff = original && discount ? Math.round((1 - discount / original) * 100) : 0;
 
             const shortName = row.ProductName.length > 15 ? row.ProductName.slice(0, 15) + '...' : row.ProductName;
 
             const dealCard = document.createElement('div');
             dealCard.className = 'deal';
             dealCard.innerHTML = `
               <span class="discount-badge">${percentOff}% OFF</span>
               <img src="${row.ImageURL}" alt="${row.ProductName}">
               <div class="deal-content">
                 <div class="deal-title">${shortName}</div>
                 <div class="price">JMD $${row.OriginalPrice}</div>
                 <div class="discount">JMD $${row.DiscountPrice}</div>
               </div>
             `;
             dealCard.addEventListener('click', () => {
               openPopup({
                 image: row.ImageURL,
                 name: row.ProductName,
                 original: row.OriginalPrice,
                 discount: row.DiscountPrice,
                 description: row.Description
               });
             });
 
             grid?.appendChild(dealCard);
           }
         });
 
       } catch (err) {
         console.error('Failed to load deals:', err);
         container.innerHTML = 'Failed to load deals. Please check the sheet URL.';
       }
     }
 
     loadDeals();
 
   document.getElementById('popup').addEventListener('click', function (e) {
   if (e.target === this) {
     closePopup();
   }
 });
      function startBrandCountdown(expireDate, elementId) {
   function update() {
     const el = document.getElementById(elementId);
     if (!el) return;
 
     const now = new Date();
     const end = new Date(expireDate);
     const diff = end - now;
 
     if (diff <= 0) {
       el.textContent = ' - Deal Ended';
       el.style.color = 'gray';
       clearInterval(timer);
       return;
     }
 
     const days = Math.floor(diff / (1000 * 60 * 60 * 24));
     const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
     const minutes = Math.floor((diff / (1000 * 60)) % 60);
     const seconds = Math.floor((diff / 1000) % 60);
 
     const parts = [];
     if (days > 0) parts.push(`${days}d`);
     if (hours > 0 || days > 0) parts.push(`${hours}h`);
     parts.push(`${minutes}m`);
     parts.push(`${seconds}s`);
 
     el.textContent = `Deals - Ends in: ${parts.join(' ')}`;
     el.style.color = (diff < 60 * 60 * 1000) ? 'red' : '#555';
   }
 
   update();
   const timer = setInterval(update, 1000);
 }
 
 
   </script> -->
